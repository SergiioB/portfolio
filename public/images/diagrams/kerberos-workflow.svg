<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="800" height="500">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
    <linearGradient id="windowsGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="linuxGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16a34a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="ansibleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="24" font-weight="bold" fill="#1e293b">Kerberos Keytab Deployment Workflow</text>
  
  <!-- Windows Team Box -->
  <rect x="50" y="80" width="220" height="180" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <text x="160" y="110" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#1e40af">Windows Team</text>
  <text x="160" y="135" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#64748b">(High Privilege)</text>
  
  <!-- AD DC -->
  <rect x="70" y="155" width="180" height="90" rx="8" fill="url(#windowsGrad)"/>
  <text x="160" y="185" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">Active Directory</text>
  <text x="160" y="205" text-anchor="middle" font-family="monospace" font-size="10" fill="#bfdbfe">ktpass command</text>
  <text x="160" y="220" text-anchor="middle" font-family="monospace" font-size="10" fill="#bfdbfe">HTTP/app.domain.com</text>
  <text x="160" y="235" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#fef3c7">.keytab file</text>
  
  <!-- Arrow: Windows to Linux -->
  <line x1="270" y1="170" x2="340" y2="170" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="305" y="160" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Secure</text>
  <text x="305" y="190" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Transfer</text>
  
  <!-- Linux Team Box -->
  <rect x="350" y="80" width="220" height="350" rx="10" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
  <text x="460" y="110" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="bold" fill="#166534">Linux Team</text>
  <text x="460" y="135" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#64748b">(Ansible Automation)</text>
  
  <!-- Ansible Control Node -->
  <rect x="370" y="155" width="180" height="100" rx="8" fill="url(#ansibleGrad)"/>
  <text x="460" y="185" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">Ansible Control</text>
  <text x="460" y="205" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">Node</text>
  <text x="460" y="225" text-anchor="middle" font-family="monospace" font-size="9" fill="#fef3c7">files/app-server/</text>
  <text x="460" y="240" text-anchor="middle" font-family="monospace" font-size="9" fill="#fef3c7">krb5_httpd.keytab</text>
  
  <!-- Ansible Vault -->
  <rect x="390" y="270" width="140" height="50" rx="8" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="2"/>
  <text x="460" y="290" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="#5b21b6">Ansible Vault</text>
  <text x="460" y="308" text-anchor="middle" font-family="monospace" font-size="9" fill="#7c3aed">Encrypted storage</text>
  
  <!-- Arrow: Ansible to Web Server -->
  <line x1="570" y1="200" x2="620" y2="200" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="595" y="190" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">SSH</text>
  
  <!-- Apache Web Server -->
  <rect x="620" y="120" width="150" height="160" rx="10" fill="#f1f5f9" stroke="#64748b" stroke-width="2"/>
  <text x="695" y="150" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#334155">Apache Server</text>
  
  <!-- Apache icon -->
  <rect x="640" y="170" width="110" height="90" rx="8" fill="url(#linuxGrad)"/>
  <text x="695" y="200" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="white">httpd</text>
  <text x="695" y="220" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#dcfce7">mod_auth_gssapi</text>
  <text x="695" y="245" text-anchor="middle" font-family="monospace" font-size="9" fill="#fef3c7">/etc/httpd/conf/</text>
  
  <!-- Keytab location -->
  <rect x="650" y="250" width="90" height="25" rx="5" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
  <text x="695" y="266" text-anchor="middle" font-family="monospace" font-size="8" fill="#92400e">krb5_httpd.keytab</text>
  
  <!-- Process Flow -->
  <rect x="50" y="290" width="290" height="140" rx="10" fill="#f1f5f9" stroke="#94a3b8" stroke-width="1"/>
  <text x="195" y="315" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="#475569">Deployment Steps</text>
  
  <!-- Step 1 -->
  <circle cx="80" cy="345" r="15" fill="#3b82f6"/>
  <text x="80" y="350" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="white">1</text>
  <text x="110" y="350" font-family="system-ui, sans-serif" font-size="12" fill="#334155">Windows: ktpass</text>
  
  <!-- Step 2 -->
  <circle cx="80" cy="380" r="15" fill="#3b82f6"/>
  <text x="80" y="385" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="white">2</text>
  <text x="110" y="385" font-family="system-ui, sans-serif" font-size="12" fill="#334155">Secure transfer to Ansible</text>
  
  <!-- Step 3 -->
  <circle cx="80" cy="415" r="15" fill="#3b82f6"/>
  <text x="80" y="420" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="bold" fill="white">3</text>
  <text x="110" y="420" font-family="system-ui, sans-serif" font-size="12" fill="#334155">ansible-playbook deploy</text>
  
  <!-- Security Note -->
  <rect x="350" y="450" width="420" height="40" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
  <text x="560" y="475" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#92400e">ðŸ”’ Separation of Duties: Windows creates, Linux deploys</text>
</svg>