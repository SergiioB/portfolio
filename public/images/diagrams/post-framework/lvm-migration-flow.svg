<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700" role="img" aria-label="LVM Application Directory Migration Architecture">
  <!-- Background -->
  <rect width="1200" height="700" fill="#0b1020" rx="20"/>

  <!-- Subtle Data Visualization Grid -->
  <defs>
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#1e293b" stroke-width="0.5"/>
    </pattern>
    <linearGradient id="rootGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#7c2d12" stop-opacity="0.8" />
      <stop offset="100%" stop-color="#450a0a" stop-opacity="0.2" />
    </linearGradient>
    <linearGradient id="lvmGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#047857" stop-opacity="0.8" />
      <stop offset="100%" stop-color="#064e3b" stop-opacity="0.2" />
    </linearGradient>
    <marker id="arrowHeadGreen" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#10b981" />
    </marker>
  </defs>

  <!-- Grid overlay -->
  <rect x="50" y="150" width="1100" height="500" fill="url(#grid)" />
  
  <!-- Title -->
  <text x="60" y="80" fill="#f8fafc" font-size="32" font-family="Segoe UI, Inter, Arial, sans-serif" font-weight="bold">LVM Zero-Risk Directory Migration</text>
  <text x="60" y="115" fill="#94a3b8" font-size="18" font-family="Segoe UI, Inter, Arial, sans-serif">Safely decouple high-growth application data from the root filesystem using LVM and Rsync.</text>

  <!-- BEFORE STATE -->
  <!-- Header -->
  <text x="250" y="200" fill="#fca5a5" font-size="20" font-family="Segoe UI, Inter, Arial, sans-serif" font-weight="bold" text-anchor="middle">BEFORE (Risky State)</text>
  
  <rect x="100" y="230" width="300" height="280" rx="12" fill="#0f172a" stroke="#7f1d1d" stroke-width="2"/>
  
  <!-- Root Filesystem block -->
  <rect x="120" y="260" width="260" height="230" rx="8" fill="url(#rootGradient)" stroke="#991b1b" stroke-width="1"/>
  <text x="250" y="290" fill="#fca5a5" font-size="18" font-family="Segoe UI, Inter, Arial, sans-serif" font-weight="bold" text-anchor="middle">/ (rootfs)</text>

  <!-- Subdirectories on root -->
  <rect x="140" y="320" width="220" height="40" rx="6" fill="#450a0a" stroke="#7f1d1d" stroke-width="1"/>
  <text x="250" y="345" fill="#f8fafc" font-size="15" font-family="Consolas, monospace" text-anchor="middle">/usr, /etc, /var</text>

  <!-- The problematic directory -->
  <rect x="140" y="380" width="220" height="90" rx="6" fill="#7f1d1d" stroke="#ef4444" stroke-width="2" stroke-dasharray="4 2"/>
  <text x="250" y="410" fill="#fef2f2" font-size="18" font-family="Consolas, monospace" font-weight="bold" text-anchor="middle">/opt (growing!)</text>
  <text x="250" y="440" fill="#fca5a5" font-size="13" font-family="Segoe UI, Inter, Arial, sans-serif" text-anchor="middle">Shared fate with OS</text>
  <text x="250" y="455" fill="#fca5a5" font-size="11" font-family="Consolas, monospace" text-anchor="middle">100% capacity risk</text>

  <!-- TRANSITION PIPELINE -->
  <!-- Arrow -->
  <path d="M 430 370 L 770 370" fill="none" stroke="#10b981" stroke-width="4" stroke-dasharray="8 4" marker-end="url(#arrowHeadGreen)"/>
  
  <rect x="490" y="280" width="220" height="120" rx="8" fill="#022c22" stroke="#059669" stroke-width="2"/>
  <text x="600" y="310" fill="#34d399" font-size="16" font-family="Segoe UI, Inter, Arial, sans-serif" font-weight="bold" text-anchor="middle">Migration Steps</text>

  <!-- Steps List -->
  <text x="510" y="340" fill="#6ee7b7" font-size="13" font-family="Consolas, monospace">1. lvcreate vg_app -n opt_vol</text>
  <text x="510" y="360" fill="#6ee7b7" font-size="13" font-family="Consolas, monospace">2. rsync -avz /opt/ /mnt/new_opt</text>
  <text x="510" y="380" fill="#6ee7b7" font-size="13" font-family="Consolas, monospace">3. mv /opt /opt_old (Backup)</text>
  

  <!-- AFTER STATE -->
  <!-- Header -->
  <text x="950" y="200" fill="#6ee7b7" font-size="20" font-family="Segoe UI, Inter, Arial, sans-serif" font-weight="bold" text-anchor="middle">AFTER (Isolated Mode)</text>
  
  <rect x="800" y="230" width="300" height="380" rx="12" fill="#0f172a" stroke="#065f46" stroke-width="2"/>
  
  <!-- Root Filesystem block (smaller now) -->
  <rect x="820" y="260" width="260" height="130" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="950" y="290" fill="#94a3b8" font-size="18" font-family="Segoe UI, Inter, Arial, sans-serif" font-weight="bold" text-anchor="middle">/ (rootfs)</text>
  
  <!-- Subdirectories -->
  <rect x="840" y="310" width="220" height="30" rx="6" fill="#0f172a" stroke="#1e293b" stroke-width="1"/>
  <text x="950" y="330" fill="#94a3b8" font-size="14" font-family="Consolas, monospace" text-anchor="middle">/usr, /etc, /var</text>

  <!-- Mount Point Placeholder -->
  <rect x="840" y="350" width="220" height="30" rx="6" fill="#020617" stroke="#334155" stroke-width="1" stroke-dasharray="4 2"/>
  <text x="950" y="370" fill="#64748b" font-size="14" font-family="Consolas, monospace" text-anchor="middle">/opt (empty mount point)</text>


  <!-- The New LVM Volume block -->
  <rect x="820" y="420" width="260" height="170" rx="8" fill="url(#lvmGradient)" stroke="#059669" stroke-width="2"/>
  <text x="950" y="450" fill="#34d399" font-size="16" font-family="Segoe UI, Inter, Arial, sans-serif" font-weight="bold" text-anchor="middle">vg_app-opt_vol (LVM)</text>
  
  <rect x="840" y="470" width="220" height="60" rx="6" fill="#064e3b" stroke="#10b981" stroke-width="2"/>
  <text x="950" y="495" fill="#f8fafc" font-size="16" font-family="Consolas, monospace" font-weight="bold" text-anchor="middle">/opt (Mounted)</text>
  <text x="950" y="515" fill="#a7f3d0" font-size="13" font-family="Segoe UI, Inter, Arial, sans-serif" text-anchor="middle">Application data isolated</text>

  <!-- fstab connection line -->
  <path d="M 820 540 Q 750 540 750 630" fill="none" stroke="#10b981" stroke-width="2"/>
  <!-- Status Box -->
  <rect x="100" y="600" width="1000" height="60" rx="8" fill="#111827" stroke="#334155" stroke-width="1"/>
  <text x="140" y="635" fill="#22c55e" font-size="16" font-family="Segoe UI, Inter, Arial, sans-serif" font-weight="bold">Post-Migration Hardening:</text>
  <text x="360" y="635" fill="#cbd5e1" font-size="15" font-family="Consolas, monospace">`restorecon -Rv /opt`</text>
  <text x="560" y="635" fill="#cbd5e1" font-size="15" font-family="Segoe UI, Inter, Arial, sans-serif">+ persist to</text>
  <text x="680" y="635" fill="#fcd34d" font-size="15" font-family="Consolas, monospace">/etc/fstab</text>

</svg>